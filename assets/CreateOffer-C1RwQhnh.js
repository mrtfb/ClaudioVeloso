import{d as g,u as D,a as _,l as v,m as T,b as l,e as s,n as u,g as n,v as m,p as c,t as i,q as k,s as w,j as S,x as V,i as d,_ as O}from"./index-D0NTzVGO.js";const C={class:"container"},j={class:"form-group"},U={key:0,class:"text-red-500 text-sm mt-1"},$={class:"form-group"},I={key:0,class:"text-red-500 text-sm mt-1"},z={class:"form-group"},L={key:0,class:"text-red-500 text-sm mt-1"},A={class:"grid grid-cols-2 gap-4"},E={class:"form-group"},B={key:0,class:"text-red-500 text-sm mt-1"},F={class:"form-group"},N={key:0,class:"text-red-500 text-sm mt-1"},P={class:"grid grid-cols-2 gap-4"},R={class:"form-group"},q=["min"],H={key:0,class:"text-red-500 text-sm mt-1"},J={class:"form-group"},M={key:0,class:"text-red-500 text-sm mt-1"},G={class:"card bg-blue-50 border-blue-200"},K={class:"space-y-2 text-sm"},Q={class:"flex justify-between"},W={class:"font-medium text-blue-900"},X={class:"flex justify-between"},Y={class:"font-bold text-blue-900"},Z={key:0,class:"flex justify-between border-t border-blue-200 pt-2"},ee={class:"font-medium text-blue-900"},te={class:"flex gap-4"},se=["disabled"],oe=["disabled"],ae={key:0,class:"flex items-center"},le={key:1},de=g({__name:"CreateOffer",setup(ie){const f=w(),b=D(),h=_(),p=v(!1),o=v({}),t=T({title:"",description:"",location:"",duration:1,payment:0,scheduledDate:(()=>{const r=new Date;return r.setDate(r.getDate()+1),r.toISOString().split("T")[0]})(),scheduledTime:"09:00"});function y(){return o.value={},t.title.trim()||(o.value.title="Título é obrigatório"),t.description.trim()||(o.value.description="Descrição é obrigatória"),t.location.trim()||(o.value.location="Localização é obrigatória"),t.duration<1&&(o.value.duration="Duração deve ser pelo menos 1 hora"),t.payment<=0&&(o.value.payment="Pagamento deve ser maior que 0"),t.scheduledDate||(o.value.scheduledDate="Data é obrigatória"),t.scheduledTime||(o.value.scheduledTime="Hora é obrigatória"),t.scheduledDate&&t.scheduledTime&&new Date(`${t.scheduledDate}T${t.scheduledTime}`)<=new Date&&(o.value.scheduledDate="Data e hora devem ser no futuro"),Object.keys(o.value).length===0}async function x(){if(!(!y()||!b.user?.id)){p.value=!0;try{const r=new Date(`${t.scheduledDate}T${t.scheduledTime}`);h.addJob({title:t.title,description:t.description,location:t.location,duration:t.duration,payment:t.payment,status:"pending",clientId:b.user.id,scheduledDate:r}),Object.assign(t,{title:"",description:"",location:"",duration:1,payment:0,scheduledDate:(()=>{const e=new Date;return e.setDate(e.getDate()+1),e.toISOString().split("T")[0]})(),scheduledTime:"09:00"}),f.push({name:"client-dashboard"})}catch(r){console.error("Error creating job offer:",r)}finally{p.value=!1}}}return(r,e)=>(d(),l("div",C,[s("form",{onSubmit:V(x,["prevent"]),class:"space-y-6"},[s("div",j,[e[8]||(e[8]=s("label",{for:"title",class:"form-label"},"Título do Trabalho *",-1)),u(s("input",{id:"title","onUpdate:modelValue":e[0]||(e[0]=a=>t.title=a),type:"text",class:c(["form-input",{"border-red-500":o.value.title}]),placeholder:"Ex: Instalação de sistema de climatização"},null,2),[[m,t.title]]),o.value.title?(d(),l("p",U,i(o.value.title),1)):n("",!0)]),s("div",$,[e[9]||(e[9]=s("label",{for:"description",class:"form-label"},"Descrição *",-1)),u(s("textarea",{id:"description","onUpdate:modelValue":e[1]||(e[1]=a=>t.description=a),class:c(["form-input form-textarea",{"border-red-500":o.value.description}]),placeholder:"Descreva detalhadamente o trabalho a ser realizado...",rows:"4"},null,2),[[m,t.description]]),o.value.description?(d(),l("p",I,i(o.value.description),1)):n("",!0)]),s("div",z,[e[10]||(e[10]=s("label",{for:"location",class:"form-label"},"Localização *",-1)),u(s("input",{id:"location","onUpdate:modelValue":e[2]||(e[2]=a=>t.location=a),type:"text",class:c(["form-input",{"border-red-500":o.value.location}]),placeholder:"Ex: Lisboa, Rua da Liberdade, 123"},null,2),[[m,t.location]]),o.value.location?(d(),l("p",L,i(o.value.location),1)):n("",!0)]),s("div",A,[s("div",E,[e[11]||(e[11]=s("label",{for:"duration",class:"form-label"},"Duração (horas) *",-1)),u(s("input",{id:"duration","onUpdate:modelValue":e[3]||(e[3]=a=>t.duration=a),type:"number",min:"1",max:"24",class:c(["form-input",{"border-red-500":o.value.duration}])},null,2),[[m,t.duration,void 0,{number:!0}]]),o.value.duration?(d(),l("p",B,i(o.value.duration),1)):n("",!0)]),s("div",F,[e[12]||(e[12]=s("label",{for:"payment",class:"form-label"},"Pagamento (€) *",-1)),u(s("input",{id:"payment","onUpdate:modelValue":e[4]||(e[4]=a=>t.payment=a),type:"number",min:"0",step:"0.01",class:c(["form-input",{"border-red-500":o.value.payment}]),placeholder:"0.00"},null,2),[[m,t.payment,void 0,{number:!0}]]),o.value.payment?(d(),l("p",N,i(o.value.payment),1)):n("",!0)])]),s("div",P,[s("div",R,[e[13]||(e[13]=s("label",{for:"scheduledDate",class:"form-label"},"Data Agendada *",-1)),u(s("input",{id:"scheduledDate","onUpdate:modelValue":e[5]||(e[5]=a=>t.scheduledDate=a),type:"date",class:c(["form-input",{"border-red-500":o.value.scheduledDate}]),min:new Date().toISOString().split("T")[0]},null,10,q),[[m,t.scheduledDate]]),o.value.scheduledDate?(d(),l("p",H,i(o.value.scheduledDate),1)):n("",!0)]),s("div",J,[e[14]||(e[14]=s("label",{for:"scheduledTime",class:"form-label"},"Hora Agendada *",-1)),u(s("input",{id:"scheduledTime","onUpdate:modelValue":e[6]||(e[6]=a=>t.scheduledTime=a),type:"time",class:c(["form-input",{"border-red-500":o.value.scheduledTime}])},null,2),[[m,t.scheduledTime]]),o.value.scheduledTime?(d(),l("p",M,i(o.value.scheduledTime),1)):n("",!0)])]),s("div",G,[e[18]||(e[18]=s("h3",{class:"text-lg font-semibold text-blue-900 mb-3"},"Resumo da Oferta",-1)),s("div",K,[s("div",Q,[e[15]||(e[15]=s("span",{class:"text-blue-700"},"Valor por hora:",-1)),s("span",W,i(t.duration>0?(t.payment/t.duration).toFixed(2):"0.00")+"€/h ",1)]),s("div",X,[e[16]||(e[16]=s("span",{class:"text-blue-700"},"Valor total:",-1)),s("span",Y,i(t.payment.toFixed(2))+"€",1)]),t.scheduledDate&&t.scheduledTime?(d(),l("div",Z,[e[17]||(e[17]=s("span",{class:"text-blue-700"},"Agendado para:",-1)),s("span",ee,i(new Date(`${t.scheduledDate}T${t.scheduledTime}`).toLocaleDateString("pt-PT",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})),1)])):n("",!0)])]),s("div",te,[s("button",{type:"button",onClick:e[7]||(e[7]=a=>k(f).back()),class:"btn btn-secondary flex-1",disabled:p.value}," Cancelar ",8,se),s("button",{type:"submit",class:"btn btn-primary flex-1",disabled:p.value},[p.value?(d(),l("span",ae,e[19]||(e[19]=[s("div",{class:"spinner mr-2"},null,-1),S(" Criando... ",-1)]))):(d(),l("span",le,"Criar Oferta"))],8,oe)])],32)]))}}),ne=O(de,[["__scopeId","data-v-2dfc6411"]]);export{ne as default};
