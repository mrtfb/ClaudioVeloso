import{d as g,u as h,a as k,l as v,m as V,b as r,e,n as d,g as u,v as p,p as m,t as i,q as C,s as j,j as D,x as O,i as l,_ as S}from"./index-BEJQ-pJg.js";const w={class:"container"},z={class:"form-group"},T={key:0,class:"text-red-500 text-sm mt-1"},U={class:"form-group"},E={key:0,class:"text-red-500 text-sm mt-1"},L={class:"form-group"},B={key:0,class:"text-red-500 text-sm mt-1"},F={class:"grid grid-cols-2 gap-4"},I={class:"form-group"},N={key:0,class:"text-red-500 text-sm mt-1"},R={class:"form-group"},q={key:0,class:"text-red-500 text-sm mt-1"},J={class:"card bg-blue-50 border-blue-200"},M={class:"space-y-2 text-sm"},P={class:"flex justify-between"},A={class:"font-medium text-blue-900"},$={class:"flex justify-between"},G={class:"font-bold text-blue-900"},H={class:"flex gap-4"},K=["disabled"],Q=["disabled"],W={key:0,class:"flex items-center"},X={key:1},Y=g({__name:"CreateOffer",setup(Z){const c=j(),b=h(),y=k(),n=v(!1),s=v({}),o=V({title:"",description:"",location:"",duration:1,payment:0});function x(){return s.value={},o.title.trim()||(s.value.title="Título é obrigatório"),o.description.trim()||(s.value.description="Descrição é obrigatória"),o.location.trim()||(s.value.location="Localização é obrigatória"),o.duration<1&&(s.value.duration="Duração deve ser pelo menos 1 hora"),o.payment<=0&&(s.value.payment="Pagamento deve ser maior que 0"),Object.keys(s.value).length===0}async function _(){if(!(!x()||!b.user?.id)){n.value=!0;try{y.addJob({title:o.title,description:o.description,location:o.location,duration:o.duration,payment:o.payment,status:"pending",clientId:b.user.id}),Object.assign(o,{title:"",description:"",location:"",duration:1,payment:0}),c.push({name:"client-dashboard"})}catch(f){console.error("Error creating job offer:",f)}finally{n.value=!1}}}return(f,t)=>(l(),r("div",w,[e("form",{onSubmit:O(_,["prevent"]),class:"space-y-6"},[e("div",z,[t[6]||(t[6]=e("label",{for:"title",class:"form-label"},"Título do Trabalho *",-1)),d(e("input",{id:"title","onUpdate:modelValue":t[0]||(t[0]=a=>o.title=a),type:"text",class:m(["form-input",{"border-red-500":s.value.title}]),placeholder:"Ex: Instalação de sistema de climatização"},null,2),[[p,o.title]]),s.value.title?(l(),r("p",T,i(s.value.title),1)):u("",!0)]),e("div",U,[t[7]||(t[7]=e("label",{for:"description",class:"form-label"},"Descrição *",-1)),d(e("textarea",{id:"description","onUpdate:modelValue":t[1]||(t[1]=a=>o.description=a),class:m(["form-input form-textarea",{"border-red-500":s.value.description}]),placeholder:"Descreva detalhadamente o trabalho a ser realizado...",rows:"4"},null,2),[[p,o.description]]),s.value.description?(l(),r("p",E,i(s.value.description),1)):u("",!0)]),e("div",L,[t[8]||(t[8]=e("label",{for:"location",class:"form-label"},"Localização *",-1)),d(e("input",{id:"location","onUpdate:modelValue":t[2]||(t[2]=a=>o.location=a),type:"text",class:m(["form-input",{"border-red-500":s.value.location}]),placeholder:"Ex: Lisboa, Rua da Liberdade, 123"},null,2),[[p,o.location]]),s.value.location?(l(),r("p",B,i(s.value.location),1)):u("",!0)]),e("div",F,[e("div",I,[t[9]||(t[9]=e("label",{for:"duration",class:"form-label"},"Duração (horas) *",-1)),d(e("input",{id:"duration","onUpdate:modelValue":t[3]||(t[3]=a=>o.duration=a),type:"number",min:"1",max:"24",class:m(["form-input",{"border-red-500":s.value.duration}])},null,2),[[p,o.duration,void 0,{number:!0}]]),s.value.duration?(l(),r("p",N,i(s.value.duration),1)):u("",!0)]),e("div",R,[t[10]||(t[10]=e("label",{for:"payment",class:"form-label"},"Pagamento (€) *",-1)),d(e("input",{id:"payment","onUpdate:modelValue":t[4]||(t[4]=a=>o.payment=a),type:"number",min:"0",step:"0.01",class:m(["form-input",{"border-red-500":s.value.payment}]),placeholder:"0.00"},null,2),[[p,o.payment,void 0,{number:!0}]]),s.value.payment?(l(),r("p",q,i(s.value.payment),1)):u("",!0)])]),e("div",J,[t[13]||(t[13]=e("h3",{class:"text-lg font-semibold text-blue-900 mb-3"},"Resumo da Oferta",-1)),e("div",M,[e("div",P,[t[11]||(t[11]=e("span",{class:"text-blue-700"},"Valor por hora:",-1)),e("span",A,i(o.duration>0?(o.payment/o.duration).toFixed(2):"0.00")+"€/h ",1)]),e("div",$,[t[12]||(t[12]=e("span",{class:"text-blue-700"},"Valor total:",-1)),e("span",G,i(o.payment.toFixed(2))+"€",1)])])]),e("div",H,[e("button",{type:"button",onClick:t[5]||(t[5]=a=>C(c).back()),class:"btn btn-secondary flex-1",disabled:n.value}," Cancelar ",8,K),e("button",{type:"submit",class:"btn btn-primary flex-1",disabled:n.value},[n.value?(l(),r("span",W,t[14]||(t[14]=[e("div",{class:"spinner mr-2"},null,-1),D(" Criando... ",-1)]))):(l(),r("span",X,"Criar Oferta"))],8,Q)])],32)]))}}),et=S(Y,[["__scopeId","data-v-78e35126"]]);export{et as default};
