import{d as C,u as M,a as j,l as T,y as A,c as v,o as V,s as B,b as o,e as t,j as f,g as n,t as a,p as D,q as b,i as l,_ as I}from"./index-XMlooSuU.js";const z={class:"container"},S={key:0,class:"space-y-6"},J={class:"card"},E={class:"flex justify-between items-start mb-4"},P={class:"text-2xl font-bold text-gray-900"},H={class:"text-gray-700 text-lg leading-relaxed"},L={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},N={class:"card"},F={class:"space-y-3"},R={key:0,class:"flex items-center"},q={class:"text-gray-600"},O={class:"flex items-center"},U={class:"text-gray-600"},G={class:"card"},K={class:"space-y-3"},Q={class:"flex items-center"},W={class:"text-2xl font-bold text-emerald-600"},X={class:"flex items-center"},Y={class:"text-gray-600"},Z={class:"flex items-center"},$={class:"text-gray-600"},tt={class:"card"},et={class:"space-y-4"},st={class:"flex items-center"},ot={class:"text-sm text-gray-600"},lt={key:0,class:"flex items-center"},at={key:1,class:"flex items-center"},rt={class:"text-sm text-gray-600"},nt={key:2,class:"flex items-center"},it={class:"text-sm text-gray-600"},dt={key:0,class:"card"},ut={class:"flex gap-4"},ct=["disabled"],mt={key:0,class:"flex items-center"},vt={key:1},pt={key:1,class:"card text-center"},xt=C({__name:"JobDetails",setup(gt){const y=A(),d=B(),i=M(),m=j(),u=T(!1),h=y.params.jobId,s=v(()=>m.jobs.find(r=>r.id===h)),k=v(()=>s.value?.status==="pending"&&i.userType==="installer"),_=v(()=>s.value?.status==="accepted"&&s.value.installerId===i.user?.id&&i.userType==="installer");function p(r){return new Intl.NumberFormat("pt-PT",{style:"currency",currency:"EUR"}).format(r)}function c(r){return new Intl.DateTimeFormat("pt-PT",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(r)}async function w(){if(!(!s.value||!i.user?.id)){u.value=!0;try{m.acceptJob(s.value.id,i.user.id),d.push({name:"installer-dashboard"})}catch(r){console.error("Error accepting job:",r)}finally{u.value=!1}}}function x(){s.value&&d.push({name:"work-session",params:{jobId:s.value.id}})}function g(){d.back()}return V(()=>{m.loadFromStorage(),s.value||d.back()}),(r,e)=>(l(),o("div",z,[t("div",{class:"mb-6"},[t("button",{onClick:g,class:"flex items-center text-gray-600 hover:text-gray-900"},e[0]||(e[0]=[t("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),f(" Voltar ",-1)]))]),s.value?(l(),o("div",S,[t("div",J,[t("div",E,[t("h1",P,a(s.value.title),1),t("span",{class:D(["badge text-sm px-3 py-1 rounded-full font-medium",s.value.status==="pending"?"bg-yellow-100 text-yellow-800":s.value.status==="accepted"?"bg-blue-100 text-blue-800":s.value.status==="in_progress"?"bg-green-100 text-green-800":s.value.status==="completed"?"bg-emerald-100 text-emerald-800":"bg-red-100 text-red-800"])},a(s.value.status==="pending"?"Pendente":s.value.status==="accepted"?"Aceito":s.value.status==="in_progress"?"Em Andamento":s.value.status==="completed"?"ConcluÃ­do":"Cancelado"),3)]),t("p",H,a(s.value.description),1)]),t("div",L,[t("div",N,[e[5]||(e[5]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"ðŸ“… Agendamento & LocalizaÃ§Ã£o",-1)),t("div",F,[s.value.scheduledDate?(l(),o("div",R,[e[2]||(e[2]=t("svg",{class:"w-5 h-5 mr-3 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3a1 1 0 011-1h6a1 1 0 011 1v4M8 7h8M8 7L6 9v10a2 2 0 002 2h8a2 2 0 002-2V9l-2-2"})],-1)),t("div",null,[e[1]||(e[1]=t("p",{class:"font-medium text-gray-900"},"Data e Hora",-1)),t("p",q,a(c(s.value.scheduledDate)),1)])])):n("",!0),t("div",O,[e[4]||(e[4]=t("svg",{class:"w-5 h-5 mr-3 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)),t("div",null,[e[3]||(e[3]=t("p",{class:"font-medium text-gray-900"},"LocalizaÃ§Ã£o",-1)),t("p",U,a(s.value.location),1)])])])]),t("div",G,[e[12]||(e[12]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"ðŸ’° Pagamento & DuraÃ§Ã£o",-1)),t("div",K,[t("div",Q,[e[7]||(e[7]=t("svg",{class:"w-5 h-5 mr-3 text-emerald-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})],-1)),t("div",null,[e[6]||(e[6]=t("p",{class:"font-medium text-gray-900"},"Valor Total",-1)),t("p",W,a(p(s.value.payment)),1)])]),t("div",X,[e[9]||(e[9]=t("svg",{class:"w-5 h-5 mr-3 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),t("div",null,[e[8]||(e[8]=t("p",{class:"font-medium text-gray-900"},"DuraÃ§Ã£o Estimada",-1)),t("p",Y,a(s.value.duration)+" "+a(s.value.duration===1?"hora":"horas"),1)])]),t("div",Z,[e[11]||(e[11]=t("svg",{class:"w-5 h-5 mr-3 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})],-1)),t("div",null,[e[10]||(e[10]=t("p",{class:"font-medium text-gray-900"},"Valor por Hora",-1)),t("p",$,a(p(s.value.payment/s.value.duration))+"/h",1)])])])])]),t("div",tt,[e[20]||(e[20]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"ðŸ“‹ HistÃ³rico",-1)),t("div",et,[t("div",st,[e[14]||(e[14]=t("div",{class:"w-3 h-3 bg-blue-500 rounded-full mr-4 flex-shrink-0"},null,-1)),t("div",null,[e[13]||(e[13]=t("p",{class:"font-medium text-gray-900"},"Oferta Criada",-1)),t("p",ot,a(c(s.value.createdAt)),1)])]),s.value.status!=="pending"?(l(),o("div",lt,e[15]||(e[15]=[t("div",{class:"w-3 h-3 bg-green-500 rounded-full mr-4 flex-shrink-0"},null,-1),t("div",null,[t("p",{class:"font-medium text-gray-900"},"Trabalho Aceito"),t("p",{class:"text-sm text-gray-600"},"Por instalador")],-1)]))):n("",!0),s.value.startedAt?(l(),o("div",at,[e[17]||(e[17]=t("div",{class:"w-3 h-3 bg-yellow-500 rounded-full mr-4 flex-shrink-0"},null,-1)),t("div",null,[e[16]||(e[16]=t("p",{class:"font-medium text-gray-900"},"Trabalho Iniciado",-1)),t("p",rt,a(c(s.value.startedAt)),1)])])):n("",!0),s.value.completedAt?(l(),o("div",nt,[e[19]||(e[19]=t("div",{class:"w-3 h-3 bg-emerald-500 rounded-full mr-4 flex-shrink-0"},null,-1)),t("div",null,[e[18]||(e[18]=t("p",{class:"font-medium text-gray-900"},"Trabalho ConcluÃ­do",-1)),t("p",it,a(c(s.value.completedAt)),1)])])):n("",!0)])]),b(i).userType==="installer"?(l(),o("div",dt,[t("div",ut,[k.value?(l(),o("button",{key:0,onClick:w,disabled:u.value,class:"btn btn-primary flex-1"},[u.value?(l(),o("span",mt,e[21]||(e[21]=[t("div",{class:"spinner mr-2"},null,-1),f(" Aceitando... ",-1)]))):(l(),o("span",vt,"âœ“ Aceitar Trabalho"))],8,ct)):n("",!0),_.value?(l(),o("button",{key:1,onClick:x,class:"btn btn-success flex-1"}," â–¶ Iniciar Trabalho ")):n("",!0),s.value.status==="in_progress"&&s.value.installerId===b(i).user?.id?(l(),o("button",{key:2,onClick:x,class:"btn btn-primary flex-1"}," â†— Continuar Trabalho ")):n("",!0)])])):n("",!0)])):(l(),o("div",pt,[e[22]||(e[22]=t("h2",{class:"text-xl font-semibold text-gray-900 mb-2"},"Trabalho nÃ£o encontrado",-1)),e[23]||(e[23]=t("p",{class:"text-gray-600 mb-4"},"O trabalho que procura nÃ£o existe ou foi removido.",-1)),t("button",{onClick:g,class:"btn btn-primary"}," Voltar ")]))]))}}),bt=I(xt,[["__scopeId","data-v-bbbbf3c4"]]);export{bt as default};
