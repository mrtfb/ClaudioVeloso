import{d as p,u as _,a as y,l as f,c as u,o as k,b as r,e,g,p as h,t as o,F as w,h as J,k as j,i as l,_ as C}from"./index-KUVLP361.js";import{J as F}from"./JobCard-Dp7Ob4gt.js";const M={class:"container"},S={class:"flex bg-gray-100 rounded-lg p-1 mb-6"},V={key:0,class:"grid grid-cols-2 gap-4 mb-6"},B={class:"card text-center"},D={class:"text-2xl font-bold text-yellow-600"},N={class:"card text-center"},I={class:"text-2xl font-bold text-green-600"},A={key:1,class:"card text-center py-8"},E={class:"text-lg font-medium text-gray-900 mb-2"},H={class:"text-gray-600"},P={key:2,class:"jobs-list"},T={key:3,class:"card mt-6"},$={class:"grid grid-cols-2 gap-4"},z={class:"text-center"},L={class:"text-xl font-bold text-blue-600"},q={class:"text-center"},G={class:"text-xl font-bold text-green-600"},K=p({__name:"InstallerDashboard",setup(O){const m=_(),c=y(),a=f("available"),n=u(()=>c.pendingJobs),v=u(()=>m.user?.id?c.getJobsForInstaller(m.user.id):[]),x=u(()=>a.value==="available"?n.value:v.value),b=u(()=>{const i=v.value;return{total:i.length,accepted:i.filter(t=>t.status==="accepted").length,inProgress:i.filter(t=>t.status==="in_progress").length,completed:i.filter(t=>t.status==="completed").length}});return k(()=>{c.loadFromStorage()}),(i,t)=>(l(),r("div",M,[e("div",S,[e("button",{onClick:t[0]||(t[0]=s=>a.value="available"),class:h(["flex-1 py-2 px-4 rounded-md text-sm font-medium transition-all",a.value==="available"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"])}," Disponíveis ("+o(n.value.length)+") ",3),e("button",{onClick:t[1]||(t[1]=s=>a.value="my-jobs"),class:h(["flex-1 py-2 px-4 rounded-md text-sm font-medium transition-all",a.value==="my-jobs"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"])}," Meus Trabalhos ("+o(v.value.length)+") ",3)]),a.value==="my-jobs"?(l(),r("div",V,[e("div",B,[e("div",D,o(b.value.accepted),1),t[2]||(t[2]=e("div",{class:"text-sm text-gray-600"},"Aceitos",-1))]),e("div",N,[e("div",I,o(b.value.inProgress),1),t[3]||(t[3]=e("div",{class:"text-sm text-gray-600"},"Em Andamento",-1))])])):g("",!0),x.value.length===0?(l(),r("div",A,[t[4]||(t[4]=e("svg",{class:"w-16 h-16 mx-auto mb-4 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})],-1)),e("h3",E,o(a.value==="available"?"Nenhum trabalho disponível":"Nenhum trabalho aceito"),1),e("p",H,o(a.value==="available"?"Não há ofertas de trabalho disponíveis no momento.":"Você ainda não aceitou nenhum trabalho."),1)])):(l(),r("div",P,[(l(!0),r(w,null,J(x.value,s=>(l(),j(F,{key:s.id,job:s,"show-installer-actions":!0},null,8,["job"]))),128))])),a.value==="available"&&n.value.length>0?(l(),r("div",T,[t[7]||(t[7]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Estatísticas",-1)),e("div",$,[e("div",z,[e("div",L,o(n.value.reduce((s,d)=>s+d.payment,0).toFixed(0))+"€ ",1),t[5]||(t[5]=e("div",{class:"text-sm text-gray-600"},"Valor Total Disponível",-1))]),e("div",q,[e("div",G,o((n.value.reduce((s,d)=>s+d.payment,0)/Math.max(n.value.reduce((s,d)=>s+d.duration,0),1)).toFixed(0))+"€/h ",1),t[6]||(t[6]=e("div",{class:"text-sm text-gray-600"},"Valor Médio por Hora",-1))])])])):g("",!0)]))}}),U=C(K,[["__scopeId","data-v-c9dcfca2"]]);export{U as default};
