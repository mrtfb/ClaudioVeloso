import{d as C,u as M,a as T,l as F,c as v,o as B,b as s,e as t,t as l,F as c,h as u,p as g,g as V,i as o,_ as A}from"./index-Q_K8XIyv.js";const I={class:"container"},J={class:"card mb-6"},N={class:"flex items-center justify-between mb-4"},Y={class:"text-xl font-semibold text-gray-900 capitalize"},j={class:"card"},z={class:"grid grid-cols-7 gap-1 mb-2"},E={class:"grid grid-cols-7 gap-1"},L={class:"space-y-1"},O=["title"],P={key:0,class:"text-xs text-gray-500"},Q={class:"card mt-6"},H={key:0,class:"text-center py-4 text-gray-600"},q={key:1,class:"space-y-3"},G={class:"font-medium text-gray-900"},K={class:"text-sm text-gray-600"},R={class:"text-right"},U=C({__name:"CalendarView",setup(W){const m=M(),_=T(),n=F(new Date),h=v(()=>m.user?.id?_.getJobsForInstaller(m.user.id).filter(d=>d.status==="accepted"||d.status==="in_progress"):[]),y=v(()=>n.value.toLocaleDateString("pt-PT",{month:"long",year:"numeric"})),D=v(()=>{const d=n.value.getFullYear(),a=n.value.getMonth(),e=new Date(d,a,1),r=new Date(e);r.setDate(r.getDate()-e.getDay());const x=[],i=new Date(r);for(let p=0;p<42;p++){const S={date:new Date(i),isCurrentMonth:i.getMonth()===a,isToday:i.toDateString()===new Date().toDateString(),jobs:h.value.filter(b=>b.scheduledDate&&b.scheduledDate.toDateString()===i.toDateString())};x.push(S),i.setDate(i.getDate()+1)}return x});function f(){n.value=new Date(n.value.getFullYear(),n.value.getMonth()-1,1)}function w(){n.value=new Date(n.value.getFullYear(),n.value.getMonth()+1,1)}function k(){n.value=new Date}return B(()=>{_.loadFromStorage()}),(d,a)=>(o(),s("div",I,[t("div",J,[t("div",N,[t("button",{onClick:f,class:"p-2 hover:bg-gray-100 rounded-lg"},a[0]||(a[0]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])),t("h2",Y,l(y.value),1),t("button",{onClick:w,class:"p-2 hover:bg-gray-100 rounded-lg"},a[1]||(a[1]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)]))]),t("button",{onClick:k,class:"btn btn-secondary w-full"}," Hoje ")]),t("div",j,[t("div",z,[(o(),s(c,null,u(["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"],e=>t("div",{key:e,class:"text-center text-sm font-medium text-gray-600 p-2"},l(e),1)),64))]),t("div",E,[(o(!0),s(c,null,u(D.value,e=>(o(),s("div",{key:e.date.toISOString(),class:g(["min-h-20 p-1 border border-gray-100 rounded-lg",e.isCurrentMonth?"bg-white":"bg-gray-50",e.isToday?"bg-blue-50 border-blue-200":""])},[t("div",{class:g(["text-sm font-medium mb-1",e.isCurrentMonth?"text-gray-900":"text-gray-400",e.isToday?"text-blue-600":""])},l(e.date.getDate()),3),t("div",L,[(o(!0),s(c,null,u(e.jobs.slice(0,2),r=>(o(),s("div",{key:r.id,class:g(["text-xs p-1 rounded text-white truncate",r.status==="accepted"?"bg-yellow-500":"bg-green-500"]),title:r.title},l(r.title),11,O))),128)),e.jobs.length>2?(o(),s("div",P," +"+l(e.jobs.length-2)+" mais ",1)):V("",!0)])],2))),128))])]),t("div",Q,[a[2]||(a[2]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Próximos Trabalhos",-1)),h.value.length===0?(o(),s("div",H," Nenhum trabalho agendado ")):(o(),s("div",q,[(o(!0),s(c,null,u(h.value.slice(0,5),e=>(o(),s("div",{key:e.id,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},[t("div",null,[t("div",G,l(e.title),1),t("div",K,l(e.location),1)]),t("div",R,[t("div",{class:g(["text-xs px-2 py-1 rounded-full",e.status==="accepted"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"])},l(e.status==="accepted"?"Agendado":"Em Andamento"),3)])]))),128))]))])]))}}),Z=A(U,[["__scopeId","data-v-7ed15782"]]);export{Z as default};
